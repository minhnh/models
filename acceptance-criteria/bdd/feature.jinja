Feature: {{ data.name }}
  {% if 'scene' in data %}
  Background:
    {%- for scene_name, scene_data in data.scene.data.items() -%}
    {%- if scene_data.type == 'bdd:SceneHasObjects' %}
    Given a set of objects
      | name |
      {% for obj_data in scene_data.objects %}| {{ obj_data.name }} |
      {%+ endfor -%}
    {%- endif -%}
    {%- endfor -%}
    Given specified objects, workspaces and agents are available
  {%- endif -%}

{% for scenario_data in data.criteria %}
  Scenario Outline: {{ scenario_data.name }}
    {% for clause in scenario_data.given_clauses %}
    {{ clause|safe }}{% endfor %}

    When "{{ scenario_data.when_event }}"
    {% for clause in scenario_data.then_clauses %}
    {{ clause|safe }}{% endfor %}

    Examples:
    |{% for var_name in scenario_data.variables %} {{ var_name }} |{% endfor %}
    {% for entity_data in scenario_data.entities %}|{% for entity_name in entity_data %} {{ entity_name }} |{% endfor %}
    {% endfor %}
{% endfor %}
